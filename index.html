<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>능이버섯 블록체인 이력추적 시스템</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    /* ─────────────────────────────────────────────────────────
       기본 레이아웃 & 시스템 UI 스타일 (기존 그대로)
    ───────────────────────────────────────────────────────── */
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #F8F8F8;
      color: #333333;
    }
    h1,h2,h3 { color:#333333; }
    .system-container {
      border:1px solid #E0E0E0;
      border-radius:10px;
      background:#fff;
      padding:1.5rem;
      box-shadow:0 6px 16px rgba(0,0,0,0.05);
    }
    .system-card {
      background:#fff;
      border-radius:8px;
      box-shadow:0 3px 9px rgba(0,0,0,0.08);
      border:1px solid #EAEAEA;
      transition:transform 0.2s,box-shadow 0.2s;
    }
    .system-card:hover {
      transform:translateY(-2px);
      box-shadow:0 5px 12px rgba(0,0,0,0.1);
    }
    .trace-id-font { font-family:'Space Mono',monospace; }

    /* ─────────────────────────────────────────────────────────
       Flowchart, Chart, Modal 등 (기존 그대로)
    ───────────────────────────────────────────────────────── */
    .flowchart-group { position:relative; padding:0 1rem; }
    .flowchart-group::before {
      content:''; position:absolute;
      left:50%;top:0;bottom:0;
      width:3px;background:#C0C0C0;
      transform:translateX(-50%); z-index:1;
    }
    .flowchart-item {
      position:relative; z-index:2;
      display:flex; flex-direction:column; align-items:center;
      margin-bottom:2.5rem;
    }
    .flowchart-item:last-child { margin-bottom:0; }
    .step-indicator {
      background:#007BFF;color:#fff;border-radius:50%;
      width:3.5rem;height:3.5rem; display:flex;
      align-items:center;justify-content:center;
      font-weight:bold;font-size:1.5rem;
      box-shadow:0 3px 8px rgba(0,0,0,0.2);
      z-index:3;margin-bottom:1rem;
    }
    .icon-wrapper {
      width:3rem;height:3rem;display:flex;
      align-items:center;justify-content:center;
      font-size:2rem;color:#555;
      margin-bottom:1rem;
    }
    .item-content { width:100%;text-align:center; }
    @media (min-width:768px) {
      .flowchart-group { padding:0 2rem; }
      .flowchart-item {
        display:grid;
        grid-template-columns:1fr auto 1fr;
        align-items:center;margin-bottom:3rem;
      }
      .flowchart-item:nth-child(odd) { grid-template-areas:"content indicator icon"; }
      .flowchart-item:nth-child(even){ grid-template-areas:"icon indicator content"; }
      .flowchart-item .system-card { grid-area:content; }
      .flowchart-item:nth-child(even) .system-card { text-align:right; }
      .step-indicator { grid-area:indicator; margin:0; }
      .icon-wrapper { grid-area:icon; margin:0; }
    }

    .chart-container{ position:relative;width:100%;max-width:300px;height:300px; }
    .chart-text{ position:absolute;top:50%;left:50%;transform:translate(-50%,-50%); font-weight:900;color:#333; }

    .modal-overlay{
      position:fixed;top:0;left:0;right:0;bottom:0;
      background:rgba(0,0,0,0.9);
      display:flex;justify-content:center;align-items:center;
      opacity:0;visibility:hidden;transition:opacity .3s,visibility .3s;
      z-index:50;
    }
    .modal-overlay.visible{ opacity:1;visibility:visible; }
    .modal-content{
      background:#fff;padding:1.5rem;border-radius:8px;
      max-width:90vw;max-height:90vh;transform:scale(.95);
      transition:transform .3s;overflow:auto;border:1px solid #E0E0E0;
      box-shadow:0 8px 20px rgba(0,0,0,0.2);
    }
    .modal-overlay.visible .modal-content{ transform:scale(1); }
    .modal-content img{ max-width:100%;max-height:100%;display:block;margin:auto; }

    /* ─────────────────────────────────────────────────────────
       *** 여기에 추가: 깜박임 & 카운터 애니메이션 ***
    ───────────────────────────────────────────────────────── */
    /* 깜박임 keyframes */
    @keyframes blink {
      0%,100% { opacity:1; }
      50%      { opacity:0; }
    }
    .blink {
      animation: blink 1s step-end infinite;
    }
  </style>
</head>
<body class="text-gray-800">

  <div class="container mx-auto p-4 md:p-8 max-w-4xl system-container">
    <!-- Hero Section -->
    <header class="text-center mb-10 border-b pb-6 border-gray-200">
      <div class="inline-block bg-[#007BFF] text-white rounded-full px-4 py-2 text-sm font-bold mb-4 shadow-md">
        <span class="inline-block animate-pulse mr-2">🔗</span>블록체인 검증 완료
      </div>
      <h1 class="text-4xl md:text-5xl font-black text-[#333333] mb-2">건조 능이버섯 통합 이력추적 시스템</h1>
      <p class="text-lg text-gray-600">Sarcodon Aspratus Traceability System</p>
    </header>

    <!-- Verification Section -->
    <section class="system-card p-6 md:p-8 mb-12 text-center">
      <p class="text-lg font-medium text-gray-700 mb-2">이력추적 문서 번호 (Traceability ID)</p>
      <p class="text-5xl md:text-6xl font-bold text-[#007BFF] trace-id-font tracking-widest mb-4">KFA-BT-20250417-CN01</p>
      <div class="inline-flex items-center bg-blue-100 text-blue-800 text-base font-semibold px-4 py-2 rounded-full border border-blue-300">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        데이터 무결성 검증 완료
      </div>
      <p class="mt-5 text-gray-600 max-w-3xl mx-auto text-sm">
        본 이력 정보는 한국산림청(KFA) 프로토콜에 따라 블록체인에 기록되어 위·변조가 불가능하며, 투명하고 신뢰할 수 있는 정보를 제공합니다.
      </p>
    </section>

    <!-- Product Overview -->
    <!-- ... (생략: 기존 그대로) ... -->

    <!-- Journey Section -->
    <!-- ... (생략: 기존 그대로) ... -->

    <!-- NEW: Blockchain Data Verification Status Section -->
    <section class="mb-12">
      <h2 class="text-3xl font-extrabold text-center mb-8 text-[#333333]">블록체인 데이터 검증 현황</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

        <!-- 카운팅 숫자 요소에 class="stat-number" & data-target -->
        <div class="system-card p-6 text-center">
          <p class="text-sm font-semibold text-gray-500 mb-2">총 데이터 블록 수</p>
          <p class="text-4xl md:text-5xl font-bold text-[#007BFF] trace-id-font stat-number" data-target="1284">0</p>
          <p class="text-xs text-gray-600 mt-2">안정적인 데이터 기록</p>
        </div>

        <div class="system-card p-6 text-center">
          <p class="text-sm font-semibold text-gray-500 mb-2">검증된 거래 수</p>
          <p class="text-4xl md:text-5xl font-bold text-[#28A745] trace-id-font stat-number" data-target="420">0</p>
          <p class="text-xs text-gray-600 mt-2">완벽한 데이터 무결성</p>
        </div>

        <div class="system-card p-6 text-center">
          <p class="text-sm font-semibold text-gray-500 mb-2">마지막 업데이트</p>
          <!-- 깜박임 효과를 줄 요소에 class="blink" -->
          <p class="text-2xl md:text-3xl font-bold text-[#C0C0C0] trace-id-font blink">
            2025.06.15 19:00 KST
          </p>
          <p class="text-xs text-gray-600 mt-2">실시간 정보 제공</p>
        </div>

      </div>
    </section>

    <!-- Safety & Quality Dashboard -->
    <!-- ... (생략: 기존 그대로) ... -->

    <!-- Document Library -->
    <!-- ... (생략: 기존 그대로) ... -->

  </div>

  <div id="imageModal" class="modal-overlay" onclick="hideModal()">
    <div class="modal-content" onclick="event.stopPropagation()">
      <img id="modalImage" src="" alt="증명서 이미지"/>
    </div>
  </div>

  <footer class="text-center p-8 text-gray-500 text-xs">
    <p>본 이력 정보는 한국산림청(KFA) 프로토콜 #KFA-BT-20250417-CN01에 따라 블록체인으로 검증되었습니다.</p>
    <p>&copy; 2025 Iwa Food Co., Ltd. All Rights Reserved.</p>
  </footer>

  <script>
    // ─────────────────────────────────────────────────────────
    // 1) 모달 스크립트 (기존 그대로)
    // ─────────────────────────────────────────────────────────
    const modal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');
    function showModal(src) {
      modalImage.src = src;
      modal.classList.add('visible');
    }
    function hideModal() {
      modal.classList.remove('visible');
      setTimeout(()=> modalImage.src = '', 300);
    }

    // ─────────────────────────────────────────────────────────
    // 2) Chart.js 초기화 (기존 그대로)
    // ─────────────────────────────────────────────────────────
    document.addEventListener('DOMContentLoaded', ()=>{
      // 여기에 기존 Chart.js 초기화 코드를 넣으시면 됩니다.
      // (생략)
    });

    // ─────────────────────────────────────────────────────────
    // 3) 숫자 카운팅 & 깜박임 애니메이션
    // ─────────────────────────────────────────────────────────
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.stat-number').forEach(counter => {
        const target = +counter.dataset.target;
        const duration = 2000;           // 총 애니메이션 시간 (ms)
        const stepTime = Math.max(Math.floor(duration / target), 16);
        let current = 0;
        const timer = setInterval(() => {
          current += 1;
          counter.textContent = current.toLocaleString();
          if (current >= target) clearInterval(timer);
        }, stepTime);
      });
    });
  </script>
</body>
</html>
